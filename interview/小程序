1、获得openid
    通过 wx.login() success,code , code=>后端， 后端把这个code和小程序id,secert当做参数，拼接在请求openid接口里，
    如果成功
    success=>会返回openid,unionid,session-key()

2.access_token
    微信大部分接口都需要一个access_token进行拼接。 这个access_token需要通过接口才能获得，
    把appid，secert当做参数，传输给微信。这个有效期为7200s。

3.微信支付
    第一步， 统一下单：
        当用户下订单，后台生成一个不重复的订单号，然后按照微信统一下下单接口要求生成一个签名。
        这个签名需要将其余不为空的请求参数按他们的key，asii码进行排序
        然后用url，query方式进行拼接。最后面加上设置商户设置的key，形成完整的字符串。
        然后对这个字符串进行Md5取值并全部大写，然后一个签名。
        将这些参数放入一个xml请求体里，进行统一下单。
        成功的会返回一个微信签名和prepay_Id(两小时内有效)，
        小程序端调起支付，也需要相应的请求参数。也需要一个签名。
        主要将prepayid加入到package参数，通过相同的方式加密。得到一个请求对象，将其返回到小程序端，
        小程序端将请求对象加入到wx.requestpayment方法里，调起支付，支付成功后。可以进行订单查询。

        订单查询分为两个部分，异步和同步，因为有这两种状态，每次订单查询，都先查看订单状态成功，如果成功就什么都不干，
        没成功就走订单查询。
        这里两个部分
        一是同步，小程序端调起支付成功后：
                通过相同的方式，将订单号之类的参数获得一个签名，加入到xml请求体，成功的话进行改变
                订单状态之类的后续操作。
        二是同步：下单可以加通知地址，平台上配置通知地址。微信会把订单之类如订单号传给服务器暴露的地址。也是xml形式。
                订单

        这里基本就是微信支付流程，退款需要https。配置证书。